<script>
async function descargarUbicaciones() {
    const token = "TU_TOKEN_GITHUB"; // ⚠️ Reemplaza con tu token personal o mejor, guárdalo del lado del servidor
    const repo = "tu_usuario/clientes"; // ⚠️ Reemplaza con tu usuario/repositorio
    const filePath = `clientes/cliente_${Date.now()}.txt`;

    // Convertir las ubicaciones a texto y encriptarlas
    const texto = encriptar(JSON.stringify(ubicacionesRegistradas));

    const contentBase64 = btoa(unescape(encodeURIComponent(texto)));

    // Enviar archivo al repositorio
    const response = await fetch(`https://api.github.com/repos/${repo}/contents/${filePath}`, {
        method: "PUT",
        headers: {
            "Authorization": `Bearer ${token}`,
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            message: "Nuevo cliente registrado",
            content: contentBase64
        })
    });

    if (response.ok) {
        alert("Código generado y subido correctamente a GitHub.");
    } else {
        const errorData = await response.json();
        console.error("Error al subir a GitHub:", errorData);
        alert("Error al subir el código. Revisa la consola.");
    }
}
</script>
